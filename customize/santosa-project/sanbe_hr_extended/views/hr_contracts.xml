<?xml version='1.0' encoding='utf-8'?>
<odoo>
    <data>
        <menuitem
            id="hr.menu_human_resources_configuration"
            parent="hr.menu_hr_root"
            name="Konfigurasi"
            groups="sanbe_hr_extended.group_hr_no_config_employee"/>
        <record id="sanbe_hr_contracts_form_attachment" model="ir.ui.view">
            <field name="name">sanbe.hr.contract.form.attachment</field>
            <field name="model">hr.contract</field>
            <field name="inherit_id" ref="hr_contract.hr_contract_view_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='date_start']" position="before">
                    <field name="no_pkwt"/>
                </xpath>
                <xpath expr="//group[@name='notes_group']" position="replace"/>

                <xpath expr="//field[@name='contract_type_id' and @groups='!hr_contract.group_hr_contract_manager']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>

                <xpath expr="//field[@name='contract_type_id' and @groups='hr_contract.group_hr_contract_manager']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>

                <xpath expr="//field[@name='structure_type_id' and @groups='!hr_contract.group_hr_contract_manager']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='structure_type_id' and @groups='hr_contract.group_hr_contract_manager']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='job_id' and @groups='!hr_contract.group_hr_contract_manager']" position="replace"/>
                <xpath expr="//field[@name='job_id' and @groups='hr_contract.group_hr_contract_manager']" position="replace"/>
                <xpath expr="//field[@name='department_id' and @groups='!hr_contract.group_hr_contract_manager']" position="replace"/>
                <xpath expr="//field[@name='department_id' and @groups='hr_contract.group_hr_contract_manager']" position="replace"/>

                <xpath expr="//field[@name='contract_type_id']" position="after">
                    <label for="attachment_contract"/>
                    <field name="attachment_contract" widget="many2many_binary" nolabel="1"/>
                </xpath>
                <xpath expr="//page[@name='information']" position="attributes">
                    <Attribute name="invisible">1</Attribute>
                </xpath>

                <xpath expr="//field[@name='employee_id']" position="attributes">
                    <attribute name="string">Karyawan</attribute>
                </xpath>

                <xpath expr="//field[@name='date_start']" position="attributes">
                    <attribute name="string">Mulai Kontrak</attribute>
                </xpath>

                <xpath expr="//field[@name='date_end']" position="attributes">
                    <attribute name="string">Akhir Kontrak</attribute>
                </xpath>



                <xpath expr="//div[@id='resource_calendar_warning']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <!-- <xpath expr="//field[@name='structure_type_id']" position="attributes">
                        <attribute name="invisible">1</attribute>
                        <attribute name="required">0</attribute>
                </xpath> -->
                <xpath expr="//field[@name='structure_type_id']" position="before">
                        <field name="sallary_amount"/>
                        <field name="nilai_pa" force_save="1" />
                        <field name="area" options="{'no_create': True,'no_create_edit': True}" required="1"/>
                        <field name="branch_ids" invisible="1" />
                        <field name="alldepartment" invisible="1" />
                        <field name="branch_id" options="{'no_create': True,'no_create_edit': True}" string = "Unit Bisnis"/>
                        <field name="directorate_id" options="{'no_create': True,'no_create_edit': True}" string = "Direktorat"/>
                        <field name="hrms_department_id" options="{'no_create': True,'no_create_edit': True}" string = "Departemen" force_save="1"/>
                        <field name="division_id" options="{'no_create': True,'no_create_edit': True}" string = "Divisi"/>
                        <field name="work_unit_id" options="{'no_create': True,'no_create_edit': True}" string = "Unit Kerja"/>
                        <field name="job_id" options="{'no_create': True,'no_create_edit': True}" string = "Jabatan" readonly="1" />
                        <label for="ws_day" string="Periode Kontrak"
                                />
                        <div class="o_row" >
                            <label for="ws_year" string="Tahun" />
                            <div class="o_row">
                                <field name="ws_year" readonly="1" force_save="1" />
                            </div>
                            <label for="ws_month" string="Bulan" />
                            <div class="o_row">
                                <field name="ws_month" readonly="1" force_save="1" />
                            </div>
                            <label for="ws_day" string="Hari" />
                            <div class="o_row">
                                <field name="ws_day" readonly="1" force_save="1" />
                            </div>
                        </div>
                        <field name="employee_group1s" options="{'no_create': True,'no_create_edit': True}" string = "Grup Pegawai" required="1"/>
                </xpath>
                <!-- employee_group1s -->
                <!-- <xpath expr="//field[@name='structure_type_id']" position="attributes">
                    <attribute name="required">0</attribute>
                     <attribute name="invisible">1</attribute>
                </xpath>  -->
                <xpath expr="//field[@name='struct_id']" position="attributes">
                    <attribute name="required">0</attribute>
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='hr_responsible_id']" position="before">
                    <field name="contracts_count" string="Jumlah Kontrak"/>
                </xpath>
                <xpath expr="//group[@name='top_info_right']" position="before">
                    <group name="notes_groups" string="Catatan">
                        <field name="notes" widget="text" nolabel="1" colspan="2" placeholder="Type in notes about this contract..."/>
                    </group>
                </xpath>
                <xpath expr="//div[hasclass('oe_title')]" position="replace">

                    <div class="row justify-content-between position-relative w-100 m-0 mb-5">
                        <div class="oe_title mw-75 ps-0 pe-2">
                            <h1 class="d-flex flex-row align-items-center">
                                <field name="name" class="text-truncate"  placeholder="Contract Reference" required="True" style="font-size: min(4vw, 2.6rem);"/>
                                <field name="kanban_state"
                                    class="d-flex align-items-center"
                                    groups="!hr_contract.group_hr_contract_manager"
                                    widget="state_selection" readonly="1"/>
                                <field name="kanban_state"
                                    class="d-flex align-items-center"
                                    groups="hr_contract.group_hr_contract_manager"
                                    widget="state_selection" readonly="0"/>
                            </h1>
                            <h2>
                                <field name="contract_type_id" placeholder="Tipe Kontrak" options="{'no_create': True,'no_create_edit': True}" nolabel="1"/>
                                <field name="number" placeholder="No. Kontrak" nolabel="1"/>
                            </h2>
                            <field name="company_id" groups="base.group_multi_company" options="{'no_create': True,'no_create_edit': True}" invisible="1"/>
                        </div>
                        <div class="o_employee_avatar m-0 p-0">
                            
                        </div>
                    </div>

                        


                        <!-- <div class="oe_title pe-0 w-100 mw-100" name="title">
                            <h1 class="d-flex flex-row justify-content-between">
                                <field name="name" class="text-truncate" placeholder="Contract Reference"/>

                                <field name="kanban_state"
                                    class="d-flex align-items-center"
                                    groups="!hr_contract.group_hr_contract_manager"
                                    widget="state_selection" readonly="1"/>
                                <field name="kanban_state"
                                    class="d-flex align-items-center"
                                    groups="hr_contract.group_hr_contract_manager"
                                    widget="state_selection" readonly="0"/>
                            </h1>
                            <h1>
                                <field name="contract_type_id" placeholder="Contract Type" nolabel="1"/>
                            </h1>
                            <h2>
                                <field name="company_id" groups="base.group_multi_company" invisible="1"/>
                            </h2>

                        </div> -->
                </xpath>
                <!-- <xpath expr="//field[@name='department_id']" position="replace">
                    <field name="depart_id" readonly="state in ['open','close']"/>
                </xpath>
                <xpath expr="//field[@name='department_id']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath> -->
                <!-- <xpath expr="//field[@name='job_id']" position="replace">
                    <field name="depart_id" invisible="1"/>
                </xpath> -->
                <!-- <xpath expr="//field[@name='job_id']" position="replace">
                    <field name="job_id" readonly="state in ['open','close']"/>
                </xpath> -->
            </field>
        </record>
        <record id="sanbe_hr_contracts_form" model="ir.ui.view">
            <field name="name">sanbe.hr.contract.form</field>
            <field name="model">hr.contract</field>
            <field name="inherit_id" ref="hr_payroll_community.hr_contract_view_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='struct_id']" position="before">
                     <field name="alldepartment" invisible="1"/>
                </xpath>
                <xpath expr="//page[@name='information']" position="attributes">
                     <attribute name="invisible">1</attribute>
                </xpath>
            </field>
        </record>

        <record id="sanbe_hr_contracts_form_employee" model="ir.ui.view">
            <field name="name">sanbe.hr.contract.form.inherits</field>
            <field name="model">hr.contract</field>
            <field name="inherit_id" ref="hr_payroll_account_community.hr_contract_view_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='journal_id']" position="after">
                    <field name="medic" string="Profesi Medis"/>
                    <field name="nurse" string="Profesi Perawat"/>
                    <field name="seciality" string="Kategori Khusus"/>
                </xpath>
            </field>
        </record>

        <record id="sanbe_hr_contracts_form_attachments" model="ir.ui.view">
            <field name="name">sanbe.hr.contract.form.attachments</field>
            <field name="model">hr.contract</field>
            <field name="inherit_id" ref="hr_contract.hr_contract_view_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='structure_type_id']" position="attributes">
                    <attribute name="required">0</attribute>
                     <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='date_start']" position="before">
                    <field name="nik"/>
                    <field name="nik_lama"/>
                </xpath>
                <xpath expr="//field[@name='employee_id']" position="replace">
                    <field name="employee_id" 
                           options="{'no_create': True,'no_create_edit': True}"/>
                </xpath>
                <xpath expr="//field[@name='name']" position="attributes">
                    <attribute name="readonly">state in ['open','close']</attribute>
                </xpath>
                <xpath expr="//field[@name='contract_type_id']" position="attributes">
                    <attribute name="readonly">state in ['open','close']</attribute>
                </xpath>
                <xpath expr="//field[@name='employee_id']" position="attributes">
                    <attribute name="readonly">state in ['open','close']</attribute>
                </xpath>
                <xpath expr="//field[@name='nik']" position="attributes">
                    <attribute name="readonly">state in ['open','close']</attribute>
                </xpath>
                <xpath expr="//field[@name='nik_lama']" position="attributes">
                    <attribute name="readonly">state in ['open','close']</attribute>
                </xpath>
                <xpath expr="//field[@name='date_start']" position="attributes">
                    <attribute name="readonly">state in ['open','close']</attribute>
                </xpath>
                <xpath expr="//field[@name='date_end']" position="attributes">
                    <attribute name="readonly">state in ['open','close']</attribute>
                </xpath>
                <xpath expr="//field[@name='notice_days']" position="attributes">
                    <attribute name="readonly">state in ['open','close']</attribute>
                </xpath>
                <xpath expr="//field[@name='sallary_amount']" position="attributes">
                    <attribute name="readonly">state in ['open','close']</attribute>
                </xpath>
                <xpath expr="//field[@name='nilai_pa']" position="attributes">
                    <attribute name="readonly">state in ['open','close']</attribute>
                </xpath>
                <xpath expr="//field[@name='area']" position="attributes">
                    <attribute name="readonly">state in ['open','close']</attribute>
                </xpath>
                <xpath expr="//field[@name='branch_id']" position="attributes">
                    <attribute name="readonly">state in ['open','close']</attribute>
                </xpath>
                <xpath expr="//field[@name='attachment_contract']" position="attributes">
                    <attribute name="readonly">state in ['open','close']</attribute>
                </xpath>
                <xpath expr="//field[@name='journal_id']" position="attributes">
                    <attribute name="readonly">state in ['open','close']</attribute>
                </xpath>
                <xpath expr="//field[@name='employee_id']" position="after">
                    <field name="emp_id"/>
                </xpath>
            </field>
        </record>

        <record id="sanbe_hr_contracts_tree_ext" model="ir.ui.view">
            <field name="name">sanbe.hr.contract.tree.ext</field>
            <field name="model">hr.contract</field>
            <field name="inherit_id" ref="hr_contract.hr_contract_view_tree"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='employee_id']" position="after">
                    <field name="emp_id"/>
                </xpath>
                <xpath expr="//field[@name='department_id']" position="replace">
                    <field name="hrms_department_id"/>
                </xpath>
                <xpath expr="//field[@name='company_id']" position="before">
                    <field name="user_id" column_invisible="True"/>
                    <field name="branch_ids" column_invisible="True"/>
                    <field name="branch_id" domain="[('id','in',user_id.branch_id.id)]"/>
                </xpath>
            </field>
        </record>

        <!-- search view -->
        <record id="hr_contract_view_search_inherit"  model="ir.ui.view">
            <field name="name">hr.contract.view.search.inherit</field>
            <field name="model">hr.contract</field>
            <field name="inherit_id" ref="hr_contract.hr_contract_view_search"/>
            <field name="arch" type="xml">
                <xpath expr="//filter[@name='group_by_department']" position="replace">
                    <filter 
                    string="HRMS Departemen" 
                    name="hrms_department_id" 
                    context="{'group_by': 'hrms_department_id'}"/>
                </xpath>
                <xpath expr="//filter[@name='hrms_department_id']" position="after">
                    <field name="user_id" column_invisible="True"/>
                    <filter 
                    string="Unit bisnis"
                    name="branch_id"
                    context="{'group_by': 'branch_id'}"
                    domain="[('branch_id', '=', user_id.branch_id.id)]"/>
                </xpath>
            </field>
        </record>

        <!-- kanban view -->
        <record id="hr_contract_view_kanban_inherit" model="ir.ui.view">
            <field name="name">hr.contract.view.kanban.inherit</field>
            <field name="model">hr.contract</field>
            <field name="inherit_id" ref="hr_contract.hr_contract_view_kanban"/>
            <field name="arch" type="xml">
                <xpath expr="//div[@class='o_hr_contract_state']/strong/field[@name='name']" position="after">
                    <br/>
                    <field name="employee_id"/>
                </xpath>
            </field>
        </record>
    </data>
</odoo>