<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
        <!-- View Inheritance Example -->
        <record id="view_res_partner_form_inherit_hutang_dokter" model="ir.ui.view">
            <field name="name">res.partner.form.inherit.hutang.dokter</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.view_partner_form"/>
            <!-- Adjust to the correct base form view ID -->
            <field name="arch" type="xml">
                <xpath expr="(//group)[1]" position="after">
                    <label for="is_dokter_mitra" string="Dokter Mitra?&#160;&#160;" invisible="1"/>
                    <field name="is_dokter_mitra" string="Dokter Mitra?" invisible="1"/>
                    <div />
                    <label for="is_customer" string="Customer?&#160;&#160;" invisible="is_dokter_mitra"/>
                    <field name="is_customer" string="Customer?" invisible="is_dokter_mitra"/>
                    <field name="tipe_customer" string="Customer Type" invisible="not is_customer or is_dokter_mitra or is_supplier"/>
                    <div />
                    <label for="is_supplier" string="Supplier?&#160;&#160;" invisible="is_dokter_mitra or is_customer "/>
                    <field name="is_supplier" string="Supplier?" invisible="is_dokter_mitra or is_customer "/>
                    <div />
                    <label for="external_id" string="External ID&#160;&#160;&#160;&#160;&#160;&#160;"/>
                    <field name="external_id" string="External ID" placeholder="External ID"/>
                </xpath>
                <xpath expr="(//group)[1]" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//notebook/page[@name='contact_addresses']" position="attributes">
                    <attribute name="invisible">['|','|','|',('is_dokter_mitra','=',True),('is_customer','=',True),('is_company','=',True)]</attribute>
                </xpath>

                <xpath expr="//notebook/page[@name='contact_addresses']" position="attributes">
                    <attribute name="invisible">['|','|','|',('is_dokter_mitra','=',True),('is_customer','=',True),('is_company','=',True)]</attribute>
                </xpath>
                <xpath expr="//notebook/page[@name='sales_purchases']" position="attributes">
                    <attribute name="invisible">['|','|','|',('is_dokter_mitra','=',True),('is_customer','=',True),('is_company','=',True)]</attribute>
                </xpath>
                <xpath expr="//notebook/page[@name='internal_notes']" position="attributes">
                    <attribute name="invisible">['|','|','|',('is_dokter_mitra','=',True),('is_customer','=',True),('is_company','=',True)]</attribute>
                </xpath>
                <xpath expr="//notebook/page[@name='accounting']" position="attributes">
                    <attribute name="invisible">['|','|','|',('is_dokter_mitra','=',True),('is_customer','=',True),('is_company','=',True)]</attribute>
                </xpath>


                <xpath expr="//notebook" position="inside">
                    <page string="Hutang Dokter" invisible="not is_dokter_mitra and is_customer">
                        <group>
                            <field name="hd_tracking_ids" string="Hutang Dokter" readonly="1">
                                <tree delete="0" create="0" default_order="id asc">
                                    <field name="currency_id" string="Currency" column_invisible='1'/>
                                    <field name="transaction_date" string="Transaction Date" optional="hide"/>
                                    <field name="populate_date" string="Populate Date" optional="hide"/>
                                    <field name="account_move_id" string="Transaction Number" optional="show"/>
                                    <field name="document_date" string="Document Date" optional="hide"/>
                                    <field name="entered_date" string="Entered Date" optional="show"/>
                                    <field name="document_no" string="Document Number" optional="show"/>
                                    <field name="transaction_class" string="Transaction Class" optional="hide"/>
                                    <field name="description" string="Description" optional="hide"/>
                                    <field name="beginning_balance" string="Beginning Balance" optional="show"/>
                                    <field name="amount_debit" string="Debit" optional='show' sum="Total Debit" widget='monetary'/>
                                    <field name="amount_credit" string="Credit" optional='show' sum="Total Credit" widget='monetary'/>
                                    <field name="ending_balance" string="Ending Balance" optional="show"/>
                                    <field name="journal_number" string="Journal Number" optional="hide"/>
                                    <field name="flag" string="Flag" optional='hide'/>
                                    <button name="ambil_view" type="object" string="Detail" class="oe_highlight"/>
                                </tree>
                            </field>
                        </group>
                    </page>
                </xpath>
            </field>
        </record>

        <!-- Action for Dokter Mitra -->
        <record id="action_dokter_mitra" model="ir.actions.act_window">
            <field name="name">Dokter</field>
            <field name="res_model">res.partner</field>
            <field name="view_mode">tree,form</field>
            <!-- <field name="domain">[('is_dokter_mitra', '=', True)]</field> -->
            <field name="context">{'default_is_dokter_mitra': 1, 'search_default_filter_dokter_mitra': 1,'is_dokter_mitra': 1'}</field>
        </record>

        <!-- Menu item for Dokter Mitra -->
        <menuitem id="menu_dokter_mitra" name="Dokter" sequence="99" action="action_dokter_mitra"/>
    </data>
</odoo>
